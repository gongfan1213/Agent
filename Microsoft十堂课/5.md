Lesson 5 What is agentic RAG?
what is identic rag how is it different to basic rag and how can we use it in our applications we're going to answer these questions in this fifth lesson of the AI agents for beginners course in this course we're going to take you from concept to code covering the fundamentals of building AI agents and in this short video follows along with the written lesson including translations and code temples that you can find along the link above and below this video so let's get started looking at what a gentigra is and we'll start looking at basic rag first so rag or retrieval augmented generation enables LLMs to take a query made from a user and retrieve relevant information from a database that information is then added to the context given to the LLM to provide more relevant responses outside of just the trading data of the LLM and while that framework isn't going away a Gentigra adds a new level of capability to it to start on the query side the agent performs an analysis of the query to create a plan of smaller tasks to use the data sources and tools it will need to answer that query and because while there is no such thing as a bad question there are complex questions that require multiple steps and systems to answer and after that information is retrieved from those systems the agent can verify if the information is enough to answer that query if not it can repeat this process of tool calling until it does and what is really great about this is that the agent can maintain long-term memory of this process so it can recall the previous attempts it tried to answer the query and improve the next time without taking those steps and this is why I would have called it adaptive rag but no one asked me when we were named these things so aentic rag it is that's enough talking let's head over to the code and see how to build this now we're here at our code editor to look at the agentic rag sample i am using the semantic kernel Azure search example uh because both we can now create an index using Azure AI search which we'll show you in the setup lesson uh how to actually set up to get the right credentials and again this code is located at the GitHub repo at the top and the bottom of this video so you can work with yourself on your machine so the first thing I want to point to is this class prompt plugin that we've created basically this allows us to after the prompt or the request from the user is sent we can actually augment the prompt so that it gives a lot more direction to the agent in terms of being able to retrieve information so we basically allowing this augmented prompt to come in uh and it basically essentially like rag where we will take the retrieve context so whatever we retrieve from our Azure search database or index and then we're going to take the user query and we're going to direct the agent to first review the retrieve context and see if it answers that query if it doesn't we're also going to direct it to say try any of the available plug-in functions because that's again the power of aentic rag it's not only to do the retrieval part but to combine those elements to other tools and things to get information to answer the query of the user so after that we will make a plugin just so that the the agent has another option in this case we have this class uh weather info plugin and this basically just returns a few different locations and an average temperature so in a in an ideal world that when the user is asking about temperature we don't actually have that information in the Azure search because again maybe that changes quite often but we also have a plugin or another tool that retrieves that information and when a user is making that query we should be able to combine those things um so now we will also add these documents so uh into our Azure search index so we have these travel documents uh we're going to use our credentials that we we set up in the setup chapter and then we basically have just some three or sorry five documents here um it has just some basic information around insurance the destinations that are available um and even you know kind of the benefits of those destinations now we're going to go actually look at the interaction from the user and the agent and I' I've kind of set this up so that we can kind of see how different parts of the application are handling different things in terms of the agentic rag so in this example the user is asking around explaining a Kontoso's travel insurance coverage and the context that it retrieves is a few different documents so we've given it directions to pull in the top three uh in this case you can see that you know obviously the first one is really relevant here in terms of really answering the question around travel insurance but the other ones might be able to support it so you can always see the context that the agents operating by using this drop down and then you can see the response that they the agent gives out in this case this is asking about what the average temperature of the Maldes is so it does a few different things first it retrieves that this is a destination available or offered by Kontoso but as you can see here it since the first review or the retrieve context doesn't answer that question we can actually go back or look at this function calls and it's actually going to make this function call which is the get destinations uh so again this is the destination it's calling with Maldes and it's going to get back the average temperature of the Maldes um I'm not sure exactly this is correct uh average temperature from all these but again this is just to show you uh the ability to first look at the context and see what available tools that it needs to be called and then the last kind of context or last example is when we need to handle both retrieving from rag perspective and the function call because like I said one of the things is that with the gentic rag is that we can handle more complex type of queries than just you know the basic rag so in this case they're asking for a good cold destination offered by Kontoso and what is the average temperature so there's two things kind of steps the agent needs to take right first to see what destinations Kontoso offers and then also the average temperature of that so if you look at this example first it's that the rag context it retrieves a document that says the popular popular destinations so Maldes Twis apps Swiss Alps and African safaris and then it also makes that function call to belt the Swiss Alps to see that this is a cold destination and it gives out the nice response which is a good cold destination offered by Kontoso is the Swiss Alps with the average so we've done both a rag context as well as a function call so that was that again you can run this code on your your side play with the questions maybe add some more documents really experiment and seeing how the powers of a rag but I'll see you in the next [Music]
