# Lesson 7: What is the AI Agent Planning Design Pattern?
what is the planning design pattern how does it help AI agents complete task and how can we use it with the agents that we build we're going to answer these questions in the seventh lesson of the AI agents for beginners course in this course we take you from concept to code covering the fundamentals of building AI agents this is a short video that follows along with the written lesson including translations and code samples that you can find at the link above and below the video but let's get started talking about the planning design pattern if this is the first time joining us welcome but if you've watched other videos you might have heard me talk about how a feature of agents is is to take a task and make a plan to complete it the planning design pattern makes that more clear by having an AI agent list the subtasks that make up a more complex task for example generating a travel plan for a 3-day vacation somewhere warm can be broken down into subtasks like booking flights hotels transportation and personal activities and while we have a focus on using one agent to create a plan where this really has impact is working with multiple agents in this case not only is the plan divided into multiple subtasks those subtasks are then completed by a separate agent or another process to get this to work really well we can also structure the output of the agent either using features of the LLM itself or through other tools this is good because then another agent or system can process and parse that information we can also add validation to the response so we know we have all the information to continue working with the steps of our agentic system well I hope you processed all that information just now but it might be easier to see it applied so let's head over to our code editor and see this in action okay so here is our code now code sample and our code editor looking at the chapter 7 example which again can be found in the GitHub repo at the link above and below the video in this case I want to first start pointing out that we're going to import this pyantic pattern uh sorry package which is basically allowing us to apply some rules or validation uh of that data in terms of the structure that we will get back and this is going to be super important again when we're using this the responses from the agent uh to either call other agents downstream or other systems so we've imported that and then what this uh package allows us to do is a couple of things so first we can define a subtask um basically structure where we have the assigned agent which is a string and it's going to have the specific agent assigned to handle the task and then the task detail so a description of what the actual task is then we're going to make a kind of model above that which is the travel plan itself so there's going to be a main task which is going to be probably you know the overall travel request of the user and then a list of subtask and again the subtask going to have an assigned agent and the task details so should this should be a very structured response from the agent uh again then we can take that structured response apply some validation so we make sure that we kind of have all of the information that we need and then we can pass that on to other agents or other systems in this case we're also going to include in the agent instructions the available agents that that it has so flight booking hotel car rental activities destination info and a default agent for general request all right and we'll have some brief descriptions of what those agents do so we have we'll come in here and we'll see the user's input which is to create a travel pen for family of two kids from Singapore to Melbourne so after that u we can see the response that we get back which is uh a validated travel plan again because we're using pant we can do some of that validation and in this nice sort of JSON format the main task the assigned task flight booking so this is going to book roundtrip tickets uh this is going to then look at the hotel booking so assign agents to the hotel booking and I think this shows also some of the powers of using AI agents versus a simple booking system or an API I call is I also add these details like finding booking a familyfriendly accommodation or familyfriendly activities and this is again because the power of large language models to understand natural language and you can think of that how powerful this is going to be if we want to then relay this to descriptions of hotels that we have in a database and we make sure that then this is a family-friendly hotel or maybe we have a filter within our database or other tools where we can take this description of this task detail and then use that filter to find specific hotels that will match this travel plan so that is applying the planning design pattern and showing how we can use large language models and AI agents to have a defined plan have defined data structure and then use that downstream for making other calls so that's the end of chapter 7 or lesson seven and we will see you in the next [Music] lesson what is the multi- aent design 
### 翻译
#### 第7课：什么是人工智能代理规划设计模式？
什么是规划设计模式？它如何帮助人工智能代理完成任务？以及我们如何在构建的代理中使用它呢？我们将在人工智能代理初学者课程的第七课中回答这些问题。在这门课程中，我们会带你从概念到代码，涵盖构建人工智能代理的基础知识。这是一个配合书面课程的短视频，包括翻译以及你可以在本视频上方和下方的链接中找到的代码示例。

那么，让我们开始讨论规划设计模式。如果这是你第一次观看我们的课程，欢迎你；但如果你已经看过其他视频，你可能听过我提到代理的一个特点是接受一项任务并制定一个完成它的计划。规划设计模式通过让人工智能代理列出构成更复杂任务的子任务，使这一点更加清晰。例如，为在温暖的地方进行的为期3天的假期生成旅行计划，可以分解为预订航班、酒店、交通和个人活动等子任务。

虽然我们重点关注使用一个代理来创建计划，但它真正产生影响的是在多个代理协同工作的情况下。在这种情况下，不仅计划被分成多个子任务，而且这些子任务随后由一个单独的代理或另一个进程来完成。为了使这个过程顺利进行，我们还可以使用大型语言模型本身的功能或通过其他工具来构建代理的输出结构。这很好，因为这样另一个代理或系统就可以处理和解析这些信息。我们还可以对响应进行验证，这样我们就知道我们拥有继续使用代理系统的步骤所需的所有信息。

我希望你刚刚理解了所有这些信息，但可能看到它的实际应用会更容易理解，所以让我们进入代码编辑器，看看实际操作吧。

好的，现在我们在代码编辑器中查看第7章的代码示例，同样，这个代码示例可以在本视频上方和下方的GitHub存储库中找到。在这种情况下，我首先要指出的是我们将导入这个 `pyantic` 包（抱歉），它基本上允许我们对返回数据的结构应用一些规则或验证。当我们使用代理的响应来调用下游的其他代理或其他系统时，这一点将非常重要。

我们已经导入了它，然后这个包允许我们做几件事。首先，我们可以定义一个子任务的基本结构，其中有 `assigned agent`（指定代理），它是一个字符串，用于指定处理任务的特定代理，然后是 `task detail`（任务详情），即实际任务的描述。然后我们将在其基础上创建一种模型，也就是旅行计划本身。这里会有一个 `main task`（主要任务），可能是用户的总体旅行请求，然后是一个子任务列表。同样，子任务将有指定的代理和任务详情。所以这应该是代理给出的非常结构化的响应。

然后我们可以对这个结构化的响应进行一些验证，以确保我们拥有所需的所有信息，然后我们可以将其传递给其他代理或其他系统。在这种情况下，我们还将在代理指令中包含它可用的代理，如航班预订、酒店、租车、活动、目的地信息以及处理一般请求的默认代理。

好的，我们会对这些代理的功能进行一些简要描述。然后我们会看到用户的输入，即 “为来自新加坡的有两个孩子的家庭创建一个去墨尔本的旅行计划”。在那之后，我们可以看到我们得到的响应，这是一个经过验证的旅行计划。同样，因为我们使用了 `pyantic`，我们可以进行一些验证，并且是以这种很好的 JSON 格式呈现。主要任务、指定任务（航班预订），这将预订往返机票，然后是酒店预订，为酒店预订指定代理。

我认为这也展示了使用人工智能代理相对于简单的预订系统或 API 调用的一些优势。我还添加了一些细节，比如 “寻找并预订适合家庭的住宿” 或 “适合家庭的活动”，这再次是因为大型语言模型理解自然语言的能力。你可以想象，如果我们想将其与数据库中酒店的描述联系起来，这将是多么强大。我们可以确保这是一家适合家庭的酒店，或者我们在数据库或其他工具中有一个过滤器，我们可以根据这个任务详情的描述，然后使用该过滤器找到与这个旅行计划匹配的特定酒店。

这就是应用规划设计模式，并展示了我们如何使用大型语言模型和人工智能代理来制定明确的计划，定义数据结构，然后在下游用于进行其他调用。这就是第7章或第7课的结尾，我们将在下一课（音乐）中与你见面，下一课是关于多智能体设计的内容。

### 要点总结
1. **课程概述**：这是人工智能代理初学者课程的第七课，介绍构建人工智能代理的基础知识，视频有配套书面课程、翻译和代码示例。
2. **规划设计模式的概念**：
    - 代理接受任务并制定完成计划，规划设计模式让代理列出构成复杂任务的子任务，如3天假期旅行计划可分解为订航班、酒店、交通和活动等子任务。
    - 多代理协同工作时，计划分离子任务由不同代理或进程完成。
    - 可利用LLM功能或其他工具构建代理输出结构，便于其他代理或系统处理解析，并对响应验证确保信息完整。
3. **代码示例**：
    - 代码在GitHub存储库，导入 `pyantic` 包用于对返回数据结构进行规则应用和验证。
    - 定义子任务结构，包含指定代理（字符串）和任务详情描述，创建旅行计划模型，有主要任务和子任务列表。
    - 代理指令包含航班预订、酒店等可用代理及默认代理并简要描述功能。
    - 用户输入为有两孩子家庭从新加坡去墨尔本的旅行计划，代理返回经 `pyantic` 验证的 JSON 格式旅行计划，含航班、酒店预订等任务及适合家庭的细节，体现了AI代理利用LLM理解自然语言及后续可与数据库等工具配合筛选匹配酒店的能力，展示规划设计模式应用。 


