# Lesson 10 How to deploy AI agents intro production
production effectively what are some uncommon mistakes and how can we fix them and what are some ways we can manage the cost we're going to cover these questions in the 10th lesson of the AI agents for beginners course in this course we take you from concept to code covering the fundamentals of building AI agents in this short video that follows along with the written lesson including translations and code samples that you can find at the link above and below this video but let's talk about getting AI agents into production and into our users and customers hands and that journey begins with evaluations of your AI agents to evaluate AI agents properly you need to look at the entire system that the AI agent operates in and set up evaluation points at each step this includes but not limited to the initial request to the large language model or service making sure you have a proper connection response times and model selection and how this might affect affect responses over time
then the agent's ability to identify the intent of the user which is helpful to make sure your agent has the ability to complete the task that's been requested then the agent's ability to identify the right tools to perform that task so that the agent is achieving the goal of the user
also the tools response to the agent's request things to consider here are any errors or malformed responses from those tools or perhaps uptime issues with the service if you're using an external service then also being able to collect the feedback of the agents response is also a part of evaluations this includes providing a UI fe or feedback mechanisms in the UI like a thumbs up thumbs down or how the users are satisfied with the responses as well as using manual evaluation as well as nlms to judge responses and having evaluation at every step of the workflow enables us to both see changes over time and it allows us to make changes to our agentic system things like changing the model or different services for tools and we can better identify the effects of these changes because we're evaluating at every step and the next step of this lesson like all the other lessons before it is to head over to our code editor and see this in action okay so welcome to chapter 10 and this code sample which again can be found at the top of the GitHub repo the link above and below this video so you've probably seen this code this sample before if you followed along with all of the lessons uh cuz we have this kernel fun this kernel function or function call that we have which is about getting destinations so these are destinations available and we also have the get flight times but the difference of this one and I want to kind of mimic scenario that you might experience when launching AI agents into production is that when we make this call we're actually going to get this HTTP error for four uh because flight times aren't currently available so again if we're using an external service we might experience this because maybe our credentials are expired or the service is down so we need to make sure that we have a way to then allow the agent to continue to operate and continue to use whatever tools that are available in this case we're essentially going to just replace that with a get flight times backup that should have also the same you know the flight times that we expect uh when a user asks that then you can maybe even also has instructions on what you know even directing the agent if the service is down how to handle those errors in this case what we we we are going to do is actually define this get flight times function as well as this get flight times backup and define this as a backup function uh for flight times and then you know if flight time service is down we're also going to make sure uh that it knows that it can start using this backup flight times so again we're not uh you establishing these grand rules in terms of error handling but you can do that in terms of especially when you're operating with multiple different services out there
so what this interaction should look like is you know we have this user input which is book me a flight to Barcelona so again this is the request from the user and we can actually see I drilled down here about the function calls that it makes so first it's going to try the get flight times uh you know passing in the destination Barcelona and what we get this http4444 error so next request is to get flight times back up which luckily that service isn't down or has no errors so then we're going to get this flight times back up and these flight times and be able to send that to the user so this is just one scenario and one type of um you know scenario you should prepare for when you're working with AI agents in production we have have a list and a written lesson of other things that you might want to look out for when launching a agent production and this will conclude at least in our initial chapters so uh 10 lessons on AI agents for beginners but we wish you the best of luck and we will continue to improve this course and add more materials as the world of AI agents continues to expand but thank you for watching the lessons


# ### 翻译
#### 第10课：如何有效地将人工智能代理部署到生产环境中
有哪些不常见的错误？我们该如何修复它们？以及我们有哪些方法可以管理成本呢？我们将在人工智能代理初学者课程的第10课中涵盖这些问题。在这门课程中，我们会带你从概念到代码，涵盖构建人工智能代理的基础知识。这个短视频是配合书面课程的，包括翻译以及你可以在本视频上方和下方的链接中找到的代码示例。

不过，让我们谈谈如何将人工智能代理部署到生产环境中，并交付给我们的用户和客户。这个过程始于对你的人工智能代理的评估。为了正确评估人工智能代理，你需要审视人工智能代理运行的整个系统，并在每一步设置评估点。这包括但不限于对大型语言模型或服务的初始请求，确保你有合适的连接、响应时间和模型选择，以及这可能会如何随着时间影响响应。

然后是代理识别用户意图的能力，这有助于确保你的代理有能力完成所请求的任务。接着是代理识别执行该任务的正确工具的能力，以便代理实现用户的目标。

还有工具对代理请求的响应，这里需要考虑的事情包括来自这些工具的任何错误或格式错误的响应，或者如果你使用的是外部服务，可能存在的服务正常运行时间问题。另外，能够收集代理响应的反馈也是评估的一部分。这包括在用户界面中提供用户界面反馈或反馈机制，比如点赞、点踩，或者用户对响应的满意程度，以及使用人工评估和大型语言模型来评判响应。在工作流程的每一步都进行评估，使我们既能看到随着时间的变化，也能让我们对代理系统进行更改，比如更改模型或工具的不同服务。并且因为我们在每一步都进行评估，所以我们可以更好地确定这些更改的效果。

和之前的所有课程一样，这节课的下一步是进入我们的代码编辑器，看看实际操作。好的，欢迎来到第10章和这个代码示例，同样，你可以在本视频上方和下方的GitHub存储库的顶部找到它。如果你跟着学完了所有课程，你可能之前已经见过这个代码示例了。因为我们有这个内核函数（kernel function）或函数调用，它是关于获取目的地的，所以这些是可用的目的地。我们还有获取航班时间的函数。但这个示例的不同之处在于，我想模拟一下你在将人工智能代理部署到生产环境中时可能遇到的场景。当我们进行这个调用时，我们实际上会得到这个HTTP 4444错误，因为目前航班时间不可用。同样，如果我们使用的是外部服务，我们可能会遇到这种情况，因为也许我们的凭据已过期，或者服务已中断。所以我们需要确保我们有一种方法，能够让代理继续运行，并继续使用任何可用的工具。在这种情况下，我们基本上会用一个 “获取航班时间备份” 函数来替代它，当用户询问时，这个备份函数应该也能提供我们期望的航班时间。然后你甚至可以有一些指令，指导代理在服务中断时如何处理这些错误。在这种情况下，我们要做的是实际定义这个 “获取航班时间” 函数以及这个 “获取航班时间备份” 函数，并将其定义为航班时间的备份函数。然后，如果航班时间服务中断，我们也要确保它知道可以开始使用这个备份航班时间。同样，我们不是要制定这些关于错误处理的宏大规则，但当你在使用多个不同的外部服务时，你尤其可以这么做。

所以这种交互应该是这样的：我们有这个用户输入 “为我预订一张去巴塞罗那的航班”，这又是来自用户的请求。我们实际上可以深入查看它所进行的函数调用。首先，它会尝试调用 “获取航班时间” 函数，传入目的地巴塞罗那，然后我们得到这个HTTP 4444错误。所以下一个请求是调用 “获取航班时间备份” 函数，幸运的是，这个服务没有中断也没有错误。然后我们会得到这个备份的航班时间，并能够将这些航班时间发送给用户。

这只是一种场景，也是当你在生产环境中使用人工智能代理时应该准备好应对的一种类型的场景。我们有一个列表和书面课程，介绍在将代理部署到生产环境中时你可能需要注意的其他事项。至少在我们的初始章节中，这将是结尾了。所以，这是关于人工智能代理初学者的10节课。但我们祝你一切顺利，并且随着人工智能代理领域的不断扩展，我们将继续改进这门课程并添加更多材料。感谢你观看这些课程。

### 要点总结
1. **课程概述**：这是人工智能代理初学者课程的第10课，介绍构建人工智能代理的基础知识，视频有配套书面课程、翻译和代码示例。
2. **AI代理生产部署的评估要点**：
    - 审视代理运行的整个系统，在各步骤设评估点，包括对大语言模型或服务的初始请求（连接、响应时间、模型选择及对响应的长期影响）。
    - 评估代理识别用户意图和正确工具的能力，以完成任务和实现用户目标。
    - 考虑工具对代理请求的响应（错误、格式问题、服务正常运行时间），收集代理响应反馈（UI反馈机制、人工及大语言模型评判）。
    - 各步骤评估利于观察变化、更改代理系统并明确更改效果。
3. **代码示例**：
    - 代码在GitHub存储库，有获取目的地和获取航班时间函数。
    - 模拟生产部署场景，调用获取航班时间函数时因航班时间不可用获HTTP 4444错误（可能因外部服务凭据过期或服务中断）。
    - 定义 “获取航班时间” 和 “获取航班时间备份” 函数，服务中断时使用备份函数。
    - 用户请求预订去巴塞罗那航班，先调用获取航班时间函数报错，再调用备份函数获航班时间并发送给用户，展示生产中应准备应对的场景，另有其他部署注意事项的列表和书面课程。 
