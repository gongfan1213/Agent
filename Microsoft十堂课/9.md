# Lesson 9 How can AI agents improve?
9 what is metacognition how does it apply to AI agents improving over time and how can we use it to our advantage when building AI agents we're going to answer these questions in the ninth lesson of the AI agents for beginners course in this course we take you from concept to code covering the fundamentals of building AI agents in this short video that follows along with the written lesson including translations and code samples that you can find at the link above and below this video but let's start by defining what metacognition is which is thinking about thinking but how does that apply to AI agents so AI agents can use data and analysis to identify errors and make improvements in its plannings and responses this enables improvements over time which makes them more unique from a basic application using an LLM or simply making API calls to different services while this is a growing field of research and but an important one because it allows agentic systems to be more transparent on its reasoning and decision-m more making it more adaptable to changing environments and improving the accuracy of interpreting the data for of their environments so but to put this in real terms let's say we have a booking flights and we ask an agent to book the best flight
And best can be defined by our preferences such as being cheap or convenient or just with our favorite airline where metacognition comes into play is enabling the agent to reflect on this decision of how it's defining the best flight as well as including preferences of the customer going forward as a pattern for making decisions in the future
this also requires designing the system in a way to gather that feedback store it and retrieve it later on for future interactions and as purposes change an AI agent should be able to adapt to these changes and be able to communicate why it has changed it and its setting based on that and while your preference might be just to listen to me talk about this topic I know there are some of people out there who also prefer to see this concept in code so let's head over to our code editor and see how this works okay so this is now as a chapter 9 code sample again this code sample is available at the GitHub repo at the top and at the bottom of this video in this example we want to kind of sort of mimic what some of the qualities around meta uh metacognition is and in this case uh we're going to kind of focus first on the agent instructions that we defined so we have some you know function calls that will kind of come into play here but we also want to uh have the agent maintain basically a customer preferences object so this is to mimic uh it kind of tracking again customer preferences over time in in a production or in a a larger application maybe this object is stored somewhere else and the agent is actually reading that but we're going to just kind of have it kind of maintain this in memory or in context of the conversation that's going on in this case we're going to make sure that we track the preferred flight times of the user and we want to make sure also that before it suggests anything or ask a user for the preferred time that it goes back to this object it reflects essentially on that information or interactions in the past so again makes it a bit more of a streamlined experience for uh using this agent uh versus you know if you're booking something you know on a UI and you have to kind of continue to select these things so in this case we're going to have user inputs here basically say book me a flight to Barcelona uh we're going to prefer later flight and this should mimic a conversation with an AI agent so if we run this code you can see some of the examples uh so first is you booking a flight to Barcelona and naturally the travel agent is going to ask you know when is your preferred time to uh for flights uh they're going to the user is going to come back and say prefer later flights and this is going to make a function call to get those flight times uh and again since it has again one of the you know powers of using large language models is being able to interpret natural language so it's going to say you know out of all these flight times I just got returned uh which one's the later flight time and in this case it's the 10:45 p.m flight so this is going to cut different to where what we might have been experiencing just using a regular flight booking application uh then the user going to say you know this is just too late i want the earliest flight so it's going to make the call back again just to get the flights that are available it doesn't need to do any sort of uh you know calculations on the the the time differences or whatever the available times are the differences between what was suggested first because you can also now pick in the earliest flight which is 8:30 a.m and just some added benefits here um we have uh you know a request for more activities and then the user is sort of stressed out about the amount of time uh that they have so again it's kind of having um in context here that the user is actually asking that they want to leave uh after the last flight so again we know the the agent has uh acknowledged that the last flight is 10:45 p.m so keeping that context and that sort of cognition in terms of okay well I know this is the last flight so I need to build an agenda that's going to fit in within the first flight to Barcelona and the first next flight out essentially uh this will then will go in uh and kind of make a defined structure of uh a flight plan because the customer is stressed out they won't have enough time and again operating within those confines so that's kind of some bits of metacognition here in terms of just operating with the context of the conversation let's say we want to sort of mimic making a new conversation but we're still going to use the chat history from last time uh to make sure that the agent knows some of our preferences as a a customer in terms of booking flight so in this scenario we're just going to say "Book me a flight to Paris." So in this case what we'll go into is the book me to Paris it's going to make the flight call function call again to get the flight times and then based on your since based on your previous preferences for later flights uh I'm going to go ahead and suggest the later flight time which is 7:15 p.m and as as kind of good in instructions we all make sure you know would you book this flight or would you like to look at alternative times so this again shows you some hints of uh some of the benefits of metacognition uh in terms of you know using the agent to take preferences or long-term memory uh and kind of apply that into an improved customer or user experience over time um this is just scratching the surface of metacognition i do encourage you to look at the written chapter as well as it shows you a little bit more of some of the samples and benefits of metacognition but that's to close chapter nine and we'll see you in
chapter [Music] 10 how can we deploy AI agents to 

### 翻译
#### 第9课：人工智能代理如何改进？
什么是元认知？它如何应用于人工智能代理随时间的改进？以及在构建人工智能代理时，我们如何利用它来发挥优势呢？我们将在人工智能代理初学者课程的第九课中回答这些问题。在这门课程中，我们会带你从概念到代码，涵盖构建人工智能代理的基础知识。这个短视频是配合书面课程的，包括翻译以及你可以在本视频上方和下方的链接中找到的代码示例。

不过，让我们首先定义一下什么是元认知，元认知就是 “思考思考本身”。但这如何应用于人工智能代理呢？人工智能代理可以使用数据和分析来识别错误，并在其规划和回复中做出改进。这使得它们能够随着时间的推移而不断改进，这使它们与使用大型语言模型的基本应用程序，或者仅仅是对不同服务进行应用程序编程接口（API）调用的应用程序相比，更具独特性。

虽然这是一个不断发展的研究领域，但却是一个重要的领域，因为它使代理系统在其推理和决策方面更加透明，使其能够更好地适应不断变化的环境，并提高对其所处环境数据的解释准确性。

但让我们从实际角度来说，假设我们要预订航班，并且我们要求一个代理预订 “最佳航班”。“最佳” 可以根据我们的偏好来定义，比如便宜、方便，或者仅仅是乘坐我们最喜欢的航空公司的航班。元认知发挥作用的地方在于，它使代理能够反思它如何定义 “最佳航班” 这一决策，并且将客户未来的偏好作为未来决策的一种模式纳入其中。

这也需要以一种能够收集反馈、存储反馈并在以后的交互中检索反馈的方式来设计系统。随着目的的变化，人工智能代理应该能够适应这些变化，并且能够说明它为什么会根据这些变化而改变其设置。

虽然你可能只是喜欢听我谈论这个话题，但我知道也有一些人更喜欢通过代码来理解这个概念，所以让我们进入代码编辑器，看看这是如何工作的吧。

好的，这是第9章的代码示例，同样，这个代码示例可以在本视频上方和下方的GitHub存储库中找到。在这个例子中，我们想要模拟一些围绕元认知的特性。在这种情况下，我们首先要关注我们定义的代理指令。所以这里会有一些函数调用发挥作用，但我们也希望代理基本上维护一个客户偏好对象。这是为了模拟随着时间的推移跟踪客户偏好，在实际生产环境中或在一个更大的应用程序中，也许这个对象存储在其他地方，而代理实际上是在读取它，但我们只是让它在内存中或在正在进行的对话上下文中维护这个对象。

在这种情况下，我们要确保跟踪用户的首选飞行时间，并且我们也要确保在它提出任何建议或询问用户的首选时间之前，它会参考这个对象，从本质上说，它会反思过去的那些信息或交互。所以，与你在用户界面上预订东西时必须不断选择这些选项相比，这使得使用这个代理的体验更加流畅。

在这种情况下，我们这里会有用户输入，基本上是说 “为我预订一张去巴塞罗那的航班”，“我们更喜欢较晚的航班”，这应该模拟与人工智能代理的对话。所以如果我们运行这段代码，你可以看到一些示例。首先是你预订去巴塞罗那的航班，自然地，旅行代理会问你 “你对航班的首选时间是什么时候？” 用户会回答说 “更喜欢较晚的航班”，这将调用一个函数来获取那些航班时间。同样，由于使用大型语言模型的一个能力就是能够解释自然语言，所以它会说 “在我刚刚得到的所有这些航班时间中，哪个是较晚的航班时间呢？” 在这种情况下，是晚上10:45的航班。这与我们仅仅使用常规航班预订应用程序可能体验到的情况不同。

然后用户会说 “这太晚了，我想要最早的航班”，所以它会再次调用函数来获取可用的航班。它不需要对时间差异或可用时间之间的差异进行任何计算，因为它现在可以直接选择最早的航班，也就是早上8:30的航班。这里还有一些额外的好处，我们有一个 “请求更多活动” 的情况，然后用户对他们所拥有的时间量感到有些紧张。所以同样，在这里的上下文中，用户实际上是在要求他们想在最后一班航班之后离开。所以我们知道代理已经确认最后一班航班是晚上10:45，所以保持这个上下文和那种认知，即 “好吧，我知道这是最后一班航班，所以我需要制定一个日程安排，使其能够适应去巴塞罗那的第一班航班和下一班离港航班之间的时间”。然后它会进入并制定一个明确的航班计划结构，因为客户很紧张，他们没有足够的时间，并且要在这些限制范围内操作。

这就是在对话上下文中操作的一些元认知的体现。假设我们想要模拟进行一个新的对话，但我们仍然要使用上次的聊天历史记录，以确保代理知道我们作为客户在预订航班方面的一些偏好。所以在这个场景中，我们只是说 “为我预订一张去巴黎的航班”。在这种情况下，我们要做的是 “为我预订去巴黎的航班”，它将再次调用获取航班时间的函数，然后根据你之前对较晚航班的偏好，我将继续建议较晚的航班时间，也就是晚上7:15的航班。并且按照良好的指令，我们要确保问你 “你会预订这趟航班吗？还是你想看看其他时间呢？”

这再次向你展示了一些元认知的好处，即使用代理来考虑偏好或长期记忆，并随着时间的推移将其应用于改善客户或用户体验。这只是元认知的冰山一角，我确实鼓励你查看书面章节，因为它会向你展示更多的一些示例以及元认知的好处。但这就是第9章的结尾了，我们将在下一章（音乐）中与你见面，第10章是关于我们如何部署人工智能代理的内容。

### 要点总结
1. **课程概述**：这是人工智能代理初学者课程的第九课，介绍构建人工智能代理的基础知识，视频有配套书面课程、翻译和代码示例。
2. **元认知的概念及对AI代理的应用**：
    - 元认知即 “思考思考本身”，AI代理可利用数据和分析识别错误，改进规划和回复，随时间提升，区别于简单的LLM应用或API调用。
    - 元认知使代理反思决策（如定义 “最佳航班”），纳入客户偏好作为未来决策模式。
    - 需设计系统收集、存储和检索反馈，以便代理适应目的变化并解释设置改变原因。
3. **代码示例**：
    - 代码在GitHub存储库，模拟元认知特性，代理维护客户偏好对象，跟踪用户首选飞行时间，参考对象反思过去交互。
    - 用户输入预订去巴塞罗那航班并偏好晚航班，代理调用函数获取时间并选10:45航班，用户嫌晚要最早航班，代理再获取选8:30航班。
    - 用户因时间紧张有更多活动请求，代理根据最后航班时间（10:45）制定航班计划，体现对话上下文的元认知。
    - 新对话预订去巴黎航班，代理根据上次晚航班偏好建议7:15航班并询问是否预订或看其他时间，展示利用偏好和长期记忆改善用户体验的元认知优势。 
