# Lesson 8 How to use a multi-AI agent system
pattern when is a good time to use multiple AI agents instead of one and when is what kind of control and visibility do we have when working with multiple agents we're going to answer these questions in the eighth lesson of the AI agents for beginners course in this course we take you from concept to code covering some of the fundamentals of building AI agents and this is a short video that follows along with the written lesson including translations and code samples that you can find at the link above and below this video to put it simply the multi- aent design pattern is where we have multiple AI agents working together to complete a common goal or task but the real question is how exactly do the AI agents do that and there are different design patterns that apply depending on their goal
there's group chat where just like a group chat with your friends and colleagues every message in the chat is broadcasted to each agent and depending on the contents of that message a group chat manager typically another AI agent will select the appropriate AI agent to handle performing the task for example you might build an airline customer service application where there are separate agents that handle booking or customer complaints or questions about flight status a customer could type their message into the chat and there would be a task request would be routed to the proper agent but there may be scenarios where an AI agent needs information from another AI agent before completing its task and this is called a handoff pattern where there is an AI agent completing each step in a defined workflow before handing it off to the net
and lastly there are cases where you want each AI agent in your application to perform some task and this is called collaborative filtering in this design pattern each agent acts as a specialist in some task or area and responds to that task in their own unique way and this is great when performing some type of analysis where you want different inputs or perspectives on some data and as you can see multi- aent design patterns cover a wide spread of different use cases but let's really see how it works by heading over to our code editor okay so now we're in our code editor looking at the chapter 8 or lesson 8 example again this code sample is available at the GitHub GitHub repo above the link above and below this video in this scenario we're actually going to have two agents one kind of producing content or writing content and another agent reviewing that content so this is kind of the reviewer checker pattern or again utilizing multiple agents to produce a better result in this case we're going to have one reviewer agent which is the concierge and we've given specific instructions to the concierge in terms of uh being able to f both focus on uh recommending recommending non-ouristy experiences for travel so we want kind of this local and authentic experience uh that the a good concier should provide right and then we also got to make sure that uh it doesn't actually uh you know provide any insights uh I mean also just only provides insights on recommendations of improving that suggestion but doesn't provide a specific example so we don't want the you know uh the concier to just make new examples and we because what we would want to happen is we have this other agent which is the front desk agent and we've also given it kind of instructions to provide one single recommendation per response so again allowing the concierge to review that and make any suggestions but not new recommendations but we also then want the uh front desk engine to consider those suggestions and refine uh that idea that they have so in this case uh we're going to say then uh what's maybe new with multi multiple agents here is that we have this termination function and this is going to be a function that we want to that essentially uh terminate the the interactions between the agents in this case we have we've defined that this is going to be when the concier has given approval of the most recent response so the other of the most recent suggestion uh that the front desk when it meets their standards in terms of having a local and authentic experience and then we also have the selection process which is where we're going to define basically how this conversation will take place so we're going to have that you know each participant takes a turn in the next conversation uh we're going to choose from these participants again the reviewer and the which is concierge and the front desk and then we've also defined what's going to happen you know the user is going to have an input or a question it's going to go first to the front desk then the front desk is going to reply then it's reviewer's turn to uh do their instructions which is going to review the front desk suggestions after that uh they're going to provide some feedback and then it's up to the front desk to then uh suggest something new so in this case then we want to go look at what this output will look like and again we have this input and this person would like to go to Paris uh it was a general question and then the front desk is going to recommend the Lou Museum the Louv is uh you know great museum and and the concier recognizes that says you know this is undeniably a worldrenowned site but it's also one of the most popular tourist destinations again we want to give a very local and authentic experience something kind of off the beaten trail in terms of suggestions so go suggesting a lesserk known museum or local art gallery so this is kind of again giving feedback to the front desk and then the uh front desk comes back the front desk agents says visit the museum de launch uh for an intimate experience with Monet's water lily so great the concierge is disapproved which then that terminates our um conversations because now it meets the uh kind of criteria for the concierge and then we can see that this is complete is true this is just one type of pattern that we will have can apply to in terms of using multiple agents uh you can see here now the kind of power between not just having one agent make suggestions and maybe having you know in hoping the user makes feedback but even using an agent to refine those uh results and giving back a better suggestion so that was the end of lesson 8 or terms of multiple agents but see you in lesson [Music]

### 翻译
#### 第8课：如何使用多人工智能代理系统
在什么情况下使用多个人工智能代理而非单个代理比较好？当使用多个代理时，我们拥有何种程度的控制和可见性？我们将在人工智能代理初学者课程的第八课中回答这些问题。在这门课程中，我们会带你从概念到代码，涵盖构建人工智能代理的一些基础知识。这是一个配合书面课程的短视频，包括翻译以及你可以在本视频上方和下方的链接中找到的代码示例。

简单来说，多智能体设计模式是指多个人工智能代理协同工作，以完成一个共同的目标或任务。但真正的问题是，人工智能代理究竟是如何做到这一点的呢？根据它们的目标，有不同的设计模式可以应用。

有一种是群聊模式，就像你和朋友、同事的群聊一样，群聊中的每一条消息都会广播给每个代理。根据消息的内容，群聊管理器（通常是另一个人工智能代理）会选择合适的人工智能代理来处理并执行任务。例如，你可能会构建一个航空公司客户服务应用程序，其中有单独的代理分别处理预订、客户投诉或关于航班状态的问题。客户可以在聊天中输入他们的消息，任务请求将被路由到合适的代理。

但可能会出现这样的场景：一个人工智能代理在完成其任务之前需要从另一个人工智能代理获取信息，这被称为交接模式。在这种模式下，有一个人工智能代理在将任务移交给下一个代理之前，完成定义工作流程中的每一步。

最后，还有一些情况是你希望应用程序中的每个人工智能代理都执行一些任务，这被称为协同过滤模式。在这种设计模式中，每个代理在某些任务或领域中扮演专家的角色，并以自己独特的方式对该任务做出响应。当进行某种类型的分析，且你希望对某些数据有不同的输入或观点时，这种模式非常有用。

如你所见，多智能体设计模式涵盖了广泛的不同用例。但让我们进入代码编辑器，看看它实际是如何工作的吧。

好的，现在我们在代码编辑器中查看第8章或第8课的示例。同样，这个代码示例可以在本视频上方和下方的GitHub存储库中找到。在这个场景中，我们实际上将有两个代理，一个代理负责生成内容或编写内容，另一个代理负责审核该内容。这有点像是审核检查模式，也就是利用多个代理来产生更好的结果。

在这种情况下，我们有一个审核代理，即礼宾代理。我们给礼宾代理提供了具体的指令，使其能够专注于推荐非旅游景点式的旅行体验，我们想要的是那种当地的、真实的体验，这是一个优秀的礼宾应该提供的，对吧？然后我们还必须确保它实际上不会提供任何见解，我的意思是它只提供关于改进建议的见解，但不提供具体的例子。所以我们不希望礼宾代理只是提出新的例子，因为我们希望发生的是，我们有另一个代理，即前台代理。我们也给它提供了一些指令，使其每次回复只提供一个单一的推荐。这样，礼宾代理就可以审核该推荐并提出任何建议，但不是新的推荐。不过，我们也希望前台代理考虑这些建议并完善他们的想法。

在这种情况下，我们要说的是，在多个代理的情况下，新的东西可能是我们有这个终止函数。这个函数的作用基本上是终止代理之间的交互。在这种情况下，我们已经定义，当礼宾代理批准了前台代理最近的建议（即当这个建议符合他们对于当地真实体验的标准时），就会触发这个函数。

我们还有选择过程，这基本上是定义这个对话将如何进行。我们将规定每个参与者在下一次对话中轮流发言，我们将从这些参与者（也就是礼宾代理和前台代理）中进行选择。然后我们还定义了将会发生什么：用户将输入一个问题，这个问题将首先发送给前台代理，然后前台代理进行回复，接着轮到审核代理（即礼宾代理）执行他们的指令，也就是审核前台代理的建议。之后，审核代理将提供一些反馈，然后由前台代理提出新的建议。

在这种情况下，我们想看看输出会是什么样子。同样，我们有这个输入，有人想去巴黎，这是一个一般性的问题。然后前台代理推荐卢浮宫博物馆，卢浮宫是一个很棒的博物馆。礼宾代理认识到这一点，说：“不可否认，这是一个世界知名的景点，但它也是最受欢迎的旅游目的地之一。” 我们再次希望给出一个非常当地的、真实的体验，一些不那么常见的建议，所以建议去一个不太知名的博物馆或当地的艺术画廊。这又一次是在给前台代理提供反馈。然后前台代理回复说：“参观橘园美术馆，去亲密体验莫奈的睡莲。” 很好，礼宾代理批准了这个建议，这就终止了我们的对话，因为现在它符合礼宾代理的标准了。然后我们可以看到 “已完成” 为真。

这只是我们在使用多个代理时可以应用的一种模式。你现在可以看到，不仅仅是让一个代理提出建议并希望用户给出反馈，甚至可以使用一个代理来完善这些结果并给出更好的建议，这其中所蕴含的力量。这就是第8课关于多个代理的内容的结尾，我们下节课再见（音乐）。

### 要点总结
1. **课程概述**：这是人工智能代理初学者课程的第八课，介绍构建人工智能代理的基础知识，视频有配套书面课程、翻译和代码示例。
2. **多智能体设计模式的概念与类型**：
    - 多智能体设计模式指多个AI代理协作完成共同目标或任务。
    - **群聊模式**：消息广播给各代理，群聊管理器依消息内容选合适代理执行任务，如航空公司客服应用中不同代理处理不同业务。
    - **交接模式**：一个代理完成任务前需从另一个代理获取信息，按定义工作流程逐步交接。
    - **协同过滤模式**：每个代理作为特定任务或领域专家，以独特方式响应任务，适用于需不同输入或观点的分析场景。
3. **代码示例**：
    - 代码在GitHub存储库，展示审核检查模式应用，有生成内容的前台代理和审核内容的礼宾代理。
    - 礼宾代理指令为推荐非热门旅游体验，只提改进见解不举新例；前台代理指令为每次回复单一推荐。
    - 定义终止函数，当礼宾代理批准前台代理建议（符合当地真实体验标准）时终止交互。
    - 选择过程规定用户输入问题先给前台代理，前台回复后礼宾审核反馈，前台再提新建议。
    - 以用户想去巴黎为例，前台先推荐卢浮宫，礼宾反馈应选非热门地，前台再推荐橘园美术馆获礼宾批准，对话终止，体现多代理协作完善结果的能力。 
